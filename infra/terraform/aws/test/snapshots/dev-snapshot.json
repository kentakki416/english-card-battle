{"format_version":"1.2","terraform_version":"1.9.6","planned_values":{"root_module":{"child_modules":[{"resources":[{"address":"module.alb.aws_lb.main","mode":"managed","type":"aws_lb","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[],"client_keep_alive":3600,"connection_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"idle_timeout":60,"internal":false,"ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"english-card-battle-dev-alb","preserve_host_header":false,"tags":{"Component":"LoadBalancer","Environment":"dev","Name":"english-card-battle-dev-alb"},"tags_all":{"Component":"LoadBalancer","Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-alb","Project":"english-card-battle","Team":"DevOps"},"timeouts":null,"xff_header_processing_mode":"append"},"sensitive_values":{"access_logs":[],"connection_logs":[],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[],"subnet_mapping":[],"subnets":[],"tags":{},"tags_all":{}}},{"address":"module.alb.aws_lb_listener.main","mode":"managed","type":"aws_lb_listener","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"port":80,"protocol":"HTTP","tags":null,"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags_all":{}}},{"address":"module.alb.aws_lb_target_group.main","mode":"managed","type":"aws_lb_target_group","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"lambda_multi_value_headers_enabled":false,"name":"english-card-battle-dev-alb-tg","port":80,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":{"Component":"LoadBalancer","Environment":"dev","Name":"english-card-battle-dev-alb"},"tags_all":{"Component":"LoadBalancer","Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-alb","Project":"english-card-battle","Team":"DevOps"},"target_type":"ip"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags":{},"tags_all":{},"target_failover":[],"target_group_health":[],"target_health_state":[]}}],"address":"module.alb"},{"resources":[{"address":"module.ecr.aws_ecr_lifecycle_policy.server","mode":"managed","type":"aws_ecr_lifecycle_policy","name":"server","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy":"{\"rules\":[{\"action\":{\"type\":\"expire\"},\"description\":\"Keep last 10 images\",\"rulePriority\":1,\"selection\":{\"countNumber\":10,\"countType\":\"imageCountMoreThan\",\"tagPrefixList\":[\"dev\"],\"tagStatus\":\"tagged\"}},{\"action\":{\"type\":\"expire\"},\"description\":\"Delete untagged images\",\"rulePriority\":2,\"selection\":{\"countNumber\":1,\"countType\":\"sinceImagePushed\",\"countUnit\":\"days\",\"tagStatus\":\"untagged\"}}]}","repository":"english-card-battle-server-dev"},"sensitive_values":{}},{"address":"module.ecr.aws_ecr_repository.server","mode":"managed","type":"aws_ecr_repository","name":"server","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"encryption_configuration":[{"encryption_type":"AES256"}],"force_delete":null,"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"english-card-battle-server-dev","tags":{"Component":"container-registry","Environment":"dev","Name":"english-card-battle-server-dev","Project":"english-card-battle"},"tags_all":{"Component":"container-registry","Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-server-dev","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"sensitive_values":{"encryption_configuration":[{}],"image_scanning_configuration":[{}],"tags":{},"tags_all":{}}},{"address":"module.ecr.aws_iam_policy.ecr_push_policy","mode":"managed","type":"aws_iam_policy","name":"ecr_push_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Policy for pushing images to ECR from GitHub Actions","name":"english-card-battle-ecr-push-dev","path":"/","tags":{"Environment":"dev","Name":"english-card-battle-ecr-push-dev","Project":"english-card-battle"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-ecr-push-dev","Project":"english-card-battle","Team":"DevOps"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.ecr"},{"resources":[{"address":"module.ecs.aws_cloudwatch_log_group.ecs_log_group","mode":"managed","type":"aws_cloudwatch_log_group","name":"ecs_log_group","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"kms_key_id":null,"name":"/ecs/english-card-battle-dev-task","retention_in_days":3,"skip_destroy":false,"tags":{"Component":"Container","Environment":"dev","Name":"english-card-battle-dev-ecs"},"tags_all":{"Component":"Container","Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-ecs","Project":"english-card-battle","Team":"DevOps"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.ecs.aws_ecs_cluster.main","mode":"managed","type":"aws_ecs_cluster","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"configuration":[],"name":"english-card-battle-dev-cluster","service_connect_defaults":[],"setting":[{"name":"containerInsights","value":"enabled"}],"tags":{"Component":"Container","Environment":"dev","Name":"english-card-battle-dev-ecs"},"tags_all":{"Component":"Container","Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-ecs","Project":"english-card-battle","Team":"DevOps"}},"sensitive_values":{"configuration":[],"service_connect_defaults":[],"setting":[{}],"tags":{},"tags_all":{}}},{"address":"module.ecs.aws_ecs_service.main","mode":"managed","type":"aws_ecs_service","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":null,"launch_type":"FARGATE","name":"english-card-battle-dev-service","network_configuration":[{"assign_public_ip":false}],"ordered_placement_strategy":[],"placement_constraints":[],"propagate_tags":null,"scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{"Component":"Container","Environment":"dev","Name":"english-card-battle-dev-ecs"},"tags_all":{"Component":"Container","Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-ecs","Project":"english-card-battle","Team":"DevOps"},"timeouts":null,"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"sensitive_values":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"load_balancer":[],"network_configuration":[{"security_groups":[],"subnets":[]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]}},{"address":"module.ecs.aws_ecs_task_definition.main","mode":"managed","type":"aws_ecs_task_definition","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"container_definitions":"[{\"image\":\"nginx:latest\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-group\":\"/ecs/english-card-battle-dev-task\",\"awslogs-region\":\"ap-northeast-1\",\"awslogs-stream-prefix\":\"ecs\"}},\"name\":\"english-card-battle-dev-app\",\"portMappings\":[{\"containerPort\":80,\"protocol\":\"tcp\"}]}]","cpu":"256","ephemeral_storage":[],"family":"english-card-battle-dev-task","inference_accelerator":[],"ipc_mode":null,"memory":"512","network_mode":"awsvpc","pid_mode":null,"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"runtime_platform":[],"skip_destroy":false,"tags":{"Component":"Container","Environment":"dev","Name":"english-card-battle-dev-ecs"},"tags_all":{"Component":"Container","Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-ecs","Project":"english-card-battle","Team":"DevOps"},"task_role_arn":null,"track_latest":false,"volume":[]},"sensitive_values":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]}},{"address":"module.ecs.aws_iam_role.ecs_task_execution_role","mode":"managed","type":"aws_iam_role","name":"ecs_task_execution_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"english-card-battle-dev-task-execution-role","path":"/","permissions_boundary":null,"tags":{"Component":"Container","Environment":"dev","Name":"english-card-battle-dev-ecs"},"tags_all":{"Component":"Container","Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-ecs","Project":"english-card-battle","Team":"DevOps"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.ecs.aws_iam_role_policy_attachment.ecs_task_execution_role_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_task_execution_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy","role":"english-card-battle-dev-task-execution-role"},"sensitive_values":{}}],"address":"module.ecs"},{"resources":[{"address":"module.vpc.aws_eip.nat[0]","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","tags":{"Name":"english-card-battle-dev-vpc-nat-eip"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-nat-eip","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_internet_gateway.igw[0]","mode":"managed","type":"aws_internet_gateway","name":"igw","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Name":"english-card-battle-dev-vpc-igw"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-igw","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_nat_gateway.nat[0]","mode":"managed","type":"aws_nat_gateway","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Name":"english-card-battle-dev-vpc-nat"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-nat","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"sensitive_values":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route.global_igw[0]","mode":"managed","type":"aws_route","name":"global_igw","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"local_gateway_id":null,"nat_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{}},{"address":"module.vpc.aws_route.global_nat[0]","mode":"managed","type":"aws_route","name":"global_nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table.route_table_igw[0]","mode":"managed","type":"aws_route_table","name":"route_table_igw","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Name":"english-card-battle-dev-vpc-igw-rt"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-igw-rt","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table.route_table_nat[0]","mode":"managed","type":"aws_route_table","name":"route_table_nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Name":"english-card-battle-dev-vpc-nat-rt"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-nat-rt","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table.route_tables[\"private-1-rt\"]","mode":"managed","type":"aws_route_table","name":"route_tables","index":"private-1-rt","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Name":"english-card-battle-dev-vpc-private-1-rt-rt"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-private-1-rt-rt","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table.route_tables[\"private-2-rt\"]","mode":"managed","type":"aws_route_table","name":"route_tables","index":"private-2-rt","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Name":"english-card-battle-dev-vpc-private-2-rt-rt"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-private-2-rt-rt","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table.route_tables[\"public-1-rt\"]","mode":"managed","type":"aws_route_table","name":"route_tables","index":"public-1-rt","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Name":"english-card-battle-dev-vpc-public-1-rt-rt"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-public-1-rt-rt","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table.route_tables[\"public-2-rt\"]","mode":"managed","type":"aws_route_table","name":"route_tables","index":"public-2-rt","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Name":"english-card-battle-dev-vpc-public-2-rt-rt"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-public-2-rt-rt","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table_association.route_table_associations[\"private-1-rt\"]","mode":"managed","type":"aws_route_table_association","name":"route_table_associations","index":"private-1-rt","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.route_table_associations[\"private-2-rt\"]","mode":"managed","type":"aws_route_table_association","name":"route_table_associations","index":"private-2-rt","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.route_table_associations[\"public-1-rt\"]","mode":"managed","type":"aws_route_table_association","name":"route_table_associations","index":"public-1-rt","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.route_table_associations[\"public-2-rt\"]","mode":"managed","type":"aws_route_table_association","name":"route_table_associations","index":"public-2-rt","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_security_group.security_groups[\"ecs_sg\"]","mode":"managed","type":"aws_security_group","name":"security_groups","index":"ecs_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for ECS tasks","name":"english-card-battle-dev-ecs-sg","revoke_rules_on_delete":false,"tags":{"Name":"english-card-battle-dev-vpc-ecs_sg-sg"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-ecs_sg-sg","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"sensitive_values":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_security_group_rule.security_group_rules[\"ecs_sg-egress-0-0--1-0.0.0.0/0\"]","mode":"managed","type":"aws_security_group_rule","name":"security_group_rules","index":"ecs_sg-egress-0-0--1-0.0.0.0/0","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","self":false,"timeouts":null,"to_port":0,"type":"egress"},"sensitive_values":{"cidr_blocks":[false]}},{"address":"module.vpc.aws_security_group_rule.security_group_rules[\"ecs_sg-ingress-80-80-tcp-0.0.0.0/0\"]","mode":"managed","type":"aws_security_group_rule","name":"security_group_rules","index":"ecs_sg-ingress-80-80-tcp-0.0.0.0/0","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"Application port access","from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"timeouts":null,"to_port":80,"type":"ingress"},"sensitive_values":{"cidr_blocks":[false]}},{"address":"module.vpc.aws_subnet.subnets[\"private-1\"]","mode":"managed","type":"aws_subnet","name":"subnets","index":"private-1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-1a","cidr_block":"10.0.11.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"english-card-battle-dev-vpc-private-1","SubnetType":"private"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-private-1","Project":"english-card-battle","SubnetType":"private","Team":"DevOps"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.subnets[\"private-2\"]","mode":"managed","type":"aws_subnet","name":"subnets","index":"private-2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-1c","cidr_block":"10.0.12.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"english-card-battle-dev-vpc-private-2","SubnetType":"private"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-private-2","Project":"english-card-battle","SubnetType":"private","Team":"DevOps"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.subnets[\"public-1\"]","mode":"managed","type":"aws_subnet","name":"subnets","index":"public-1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-1a","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"english-card-battle-dev-vpc-public-1","SubnetType":"public"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-public-1","Project":"english-card-battle","SubnetType":"public","Team":"DevOps"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.subnets[\"public-2\"]","mode":"managed","type":"aws_subnet","name":"subnets","index":"public-2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-1c","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"english-card-battle-dev-vpc-public-2","SubnetType":"public"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-public-2","Project":"english-card-battle","SubnetType":"public","Team":"DevOps"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_vpc.vpc","mode":"managed","type":"aws_vpc","name":"vpc","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.0.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Name":"english-card-battle-dev-vpc-vpc"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-vpc","Project":"english-card-battle","Team":"DevOps"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.vpc"}]}},"resource_changes":[{"address":"module.alb.aws_lb.main","module_address":"module.alb","mode":"managed","type":"aws_lb","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"access_logs":[],"client_keep_alive":3600,"connection_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"idle_timeout":60,"internal":false,"ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"english-card-battle-dev-alb","preserve_host_header":false,"tags":{"Component":"LoadBalancer","Environment":"dev","Name":"english-card-battle-dev-alb"},"tags_all":{"Component":"LoadBalancer","Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-alb","Project":"english-card-battle","Team":"DevOps"},"timeouts":null,"xff_header_processing_mode":"append"},"after_unknown":{"access_logs":[],"arn":true,"arn_suffix":true,"connection_logs":[],"dns_name":true,"enforce_security_group_inbound_rules_on_private_link_traffic":true,"id":true,"ip_address_type":true,"ipam_pools":[],"minimum_load_balancer_capacity":[],"name_prefix":true,"security_groups":true,"subnet_mapping":true,"subnets":true,"tags":{},"tags_all":{},"vpc_id":true,"zone_id":true},"before_sensitive":false,"after_sensitive":{"access_logs":[],"connection_logs":[],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[],"subnet_mapping":[],"subnets":[],"tags":{},"tags_all":{}}}},{"address":"module.alb.aws_lb_listener.main","module_address":"module.alb","mode":"managed","type":"aws_lb_listener","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"port":80,"protocol":"HTTP","tags":null,"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"after_unknown":{"arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[],"target_group_arn":true}],"id":true,"load_balancer_arn":true,"mutual_authentication":true,"routing_http_request_x_amzn_mtls_clientcert_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":true,"routing_http_request_x_amzn_tls_cipher_suite_header_name":true,"routing_http_request_x_amzn_tls_version_header_name":true,"routing_http_response_access_control_allow_credentials_header_value":true,"routing_http_response_access_control_allow_headers_header_value":true,"routing_http_response_access_control_allow_methods_header_value":true,"routing_http_response_access_control_allow_origin_header_value":true,"routing_http_response_access_control_expose_headers_header_value":true,"routing_http_response_access_control_max_age_header_value":true,"routing_http_response_content_security_policy_header_value":true,"routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":true,"routing_http_response_x_content_type_options_header_value":true,"routing_http_response_x_frame_options_header_value":true,"ssl_policy":true,"tags_all":{},"tcp_idle_timeout_seconds":true},"before_sensitive":false,"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags_all":{}}}},{"address":"module.alb.aws_lb_target_group.main","module_address":"module.alb","mode":"managed","type":"aws_lb_target_group","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"lambda_multi_value_headers_enabled":false,"name":"english-card-battle-dev-alb-tg","port":80,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":{"Component":"LoadBalancer","Environment":"dev","Name":"english-card-battle-dev-alb"},"tags_all":{"Component":"LoadBalancer","Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-alb","Project":"english-card-battle","Team":"DevOps"},"target_type":"ip"},"after_unknown":{"arn":true,"arn_suffix":true,"connection_termination":true,"health_check":[{}],"id":true,"ip_address_type":true,"load_balancer_arns":true,"load_balancing_algorithm_type":true,"load_balancing_anomaly_mitigation":true,"load_balancing_cross_zone_enabled":true,"name_prefix":true,"preserve_client_ip":true,"protocol_version":true,"stickiness":true,"tags":{},"tags_all":{},"target_failover":true,"target_group_health":true,"target_health_state":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags":{},"tags_all":{},"target_failover":[],"target_group_health":[],"target_health_state":[]}}},{"address":"module.ecr.aws_ecr_lifecycle_policy.server","module_address":"module.ecr","mode":"managed","type":"aws_ecr_lifecycle_policy","name":"server","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy":"{\"rules\":[{\"action\":{\"type\":\"expire\"},\"description\":\"Keep last 10 images\",\"rulePriority\":1,\"selection\":{\"countNumber\":10,\"countType\":\"imageCountMoreThan\",\"tagPrefixList\":[\"dev\"],\"tagStatus\":\"tagged\"}},{\"action\":{\"type\":\"expire\"},\"description\":\"Delete untagged images\",\"rulePriority\":2,\"selection\":{\"countNumber\":1,\"countType\":\"sinceImagePushed\",\"countUnit\":\"days\",\"tagStatus\":\"untagged\"}}]}","repository":"english-card-battle-server-dev"},"after_unknown":{"id":true,"registry_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.ecr.aws_ecr_repository.server","module_address":"module.ecr","mode":"managed","type":"aws_ecr_repository","name":"server","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"encryption_configuration":[{"encryption_type":"AES256"}],"force_delete":null,"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"english-card-battle-server-dev","tags":{"Component":"container-registry","Environment":"dev","Name":"english-card-battle-server-dev","Project":"english-card-battle"},"tags_all":{"Component":"container-registry","Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-server-dev","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"after_unknown":{"arn":true,"encryption_configuration":[{"kms_key":true}],"id":true,"image_scanning_configuration":[{}],"registry_id":true,"repository_url":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"encryption_configuration":[{}],"image_scanning_configuration":[{}],"tags":{},"tags_all":{}}}},{"address":"module.ecr.aws_iam_policy.ecr_push_policy","module_address":"module.ecr","mode":"managed","type":"aws_iam_policy","name":"ecr_push_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Policy for pushing images to ECR from GitHub Actions","name":"english-card-battle-ecr-push-dev","path":"/","tags":{"Environment":"dev","Name":"english-card-battle-ecr-push-dev","Project":"english-card-battle"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-ecr-push-dev","Project":"english-card-battle","Team":"DevOps"}},"after_unknown":{"arn":true,"attachment_count":true,"id":true,"name_prefix":true,"policy":true,"policy_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.ecs.aws_cloudwatch_log_group.ecs_log_group","module_address":"module.ecs","mode":"managed","type":"aws_cloudwatch_log_group","name":"ecs_log_group","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"kms_key_id":null,"name":"/ecs/english-card-battle-dev-task","retention_in_days":3,"skip_destroy":false,"tags":{"Component":"Container","Environment":"dev","Name":"english-card-battle-dev-ecs"},"tags_all":{"Component":"Container","Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-ecs","Project":"english-card-battle","Team":"DevOps"}},"after_unknown":{"arn":true,"id":true,"log_group_class":true,"name_prefix":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.ecs.aws_ecs_cluster.main","module_address":"module.ecs","mode":"managed","type":"aws_ecs_cluster","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"configuration":[],"name":"english-card-battle-dev-cluster","service_connect_defaults":[],"setting":[{"name":"containerInsights","value":"enabled"}],"tags":{"Component":"Container","Environment":"dev","Name":"english-card-battle-dev-ecs"},"tags_all":{"Component":"Container","Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-ecs","Project":"english-card-battle","Team":"DevOps"}},"after_unknown":{"arn":true,"configuration":[],"id":true,"service_connect_defaults":[],"setting":[{}],"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"configuration":[],"service_connect_defaults":[],"setting":[{}],"tags":{},"tags_all":{}}}},{"address":"module.ecs.aws_ecs_service.main","module_address":"module.ecs","mode":"managed","type":"aws_ecs_service","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alarms":[],"availability_zone_rebalancing":"DISABLED","capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":null,"launch_type":"FARGATE","name":"english-card-battle-dev-service","network_configuration":[{"assign_public_ip":false}],"ordered_placement_strategy":[],"placement_constraints":[],"propagate_tags":null,"scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":{"Component":"Container","Environment":"dev","Name":"english-card-battle-dev-ecs"},"tags_all":{"Component":"Container","Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-ecs","Project":"english-card-battle","Team":"DevOps"},"timeouts":null,"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"after_unknown":{"alarms":[],"capacity_provider_strategy":[],"cluster":true,"deployment_circuit_breaker":[],"deployment_controller":[],"iam_role":true,"id":true,"load_balancer":true,"network_configuration":[{"security_groups":true,"subnets":true}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":true,"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"task_definition":true,"triggers":true,"volume_configuration":[],"vpc_lattice_configurations":[]},"before_sensitive":false,"after_sensitive":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"load_balancer":[],"network_configuration":[{"security_groups":[],"subnets":[]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags":{},"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]}}},{"address":"module.ecs.aws_ecs_task_definition.main","module_address":"module.ecs","mode":"managed","type":"aws_ecs_task_definition","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"container_definitions":"[{\"image\":\"nginx:latest\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-group\":\"/ecs/english-card-battle-dev-task\",\"awslogs-region\":\"ap-northeast-1\",\"awslogs-stream-prefix\":\"ecs\"}},\"name\":\"english-card-battle-dev-app\",\"portMappings\":[{\"containerPort\":80,\"protocol\":\"tcp\"}]}]","cpu":"256","ephemeral_storage":[],"family":"english-card-battle-dev-task","inference_accelerator":[],"ipc_mode":null,"memory":"512","network_mode":"awsvpc","pid_mode":null,"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"runtime_platform":[],"skip_destroy":false,"tags":{"Component":"Container","Environment":"dev","Name":"english-card-battle-dev-ecs"},"tags_all":{"Component":"Container","Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-ecs","Project":"english-card-battle","Team":"DevOps"},"task_role_arn":null,"track_latest":false,"volume":[]},"after_unknown":{"arn":true,"arn_without_revision":true,"enable_fault_injection":true,"ephemeral_storage":[],"execution_role_arn":true,"id":true,"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"revision":true,"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]},"before_sensitive":false,"after_sensitive":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags":{},"tags_all":{},"volume":[]}}},{"address":"module.ecs.aws_iam_role.ecs_task_execution_role","module_address":"module.ecs","mode":"managed","type":"aws_iam_role","name":"ecs_task_execution_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"english-card-battle-dev-task-execution-role","path":"/","permissions_boundary":null,"tags":{"Component":"Container","Environment":"dev","Name":"english-card-battle-dev-ecs"},"tags_all":{"Component":"Container","Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-ecs","Project":"english-card-battle","Team":"DevOps"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.ecs.aws_iam_role_policy_attachment.ecs_task_execution_role_policy","module_address":"module.ecs","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_task_execution_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy","role":"english-card-battle-dev-task-execution-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_eip.nat[0]","module_address":"module.vpc","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","tags":{"Name":"english-card-battle-dev-vpc-nat-eip"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-nat-eip","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"after_unknown":{"allocation_id":true,"arn":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"id":true,"instance":true,"ipam_pool_id":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"ptr_record":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{},"tags_all":{},"vpc":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_internet_gateway.igw[0]","module_address":"module.vpc","mode":"managed","type":"aws_internet_gateway","name":"igw","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"english-card-battle-dev-vpc-igw"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-igw","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_nat_gateway.nat[0]","module_address":"module.vpc","mode":"managed","type":"aws_nat_gateway","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Name":"english-card-battle-dev-vpc-nat"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-nat","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"after_unknown":{"allocation_id":true,"association_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"secondary_private_ip_address_count":true,"secondary_private_ip_addresses":true,"subnet_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route.global_igw[0]","module_address":"module.vpc","mode":"managed","type":"aws_route","name":"global_igw","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"local_gateway_id":null,"nat_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"gateway_id":true,"id":true,"instance_id":true,"instance_owner_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route.global_nat[0]","module_address":"module.vpc","mode":"managed","type":"aws_route","name":"global_nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"id":true,"instance_id":true,"instance_owner_id":true,"nat_gateway_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table.route_table_igw[0]","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"route_table_igw","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"english-card-battle-dev-vpc-igw-rt"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-igw-rt","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table.route_table_nat[0]","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"route_table_nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"english-card-battle-dev-vpc-nat-rt"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-nat-rt","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table.route_tables[\"private-1-rt\"]","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"route_tables","index":"private-1-rt","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"english-card-battle-dev-vpc-private-1-rt-rt"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-private-1-rt-rt","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table.route_tables[\"private-2-rt\"]","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"route_tables","index":"private-2-rt","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"english-card-battle-dev-vpc-private-2-rt-rt"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-private-2-rt-rt","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table.route_tables[\"public-1-rt\"]","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"route_tables","index":"public-1-rt","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"english-card-battle-dev-vpc-public-1-rt-rt"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-public-1-rt-rt","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table.route_tables[\"public-2-rt\"]","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"route_tables","index":"public-2-rt","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"english-card-battle-dev-vpc-public-2-rt-rt"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-public-2-rt-rt","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table_association.route_table_associations[\"private-1-rt\"]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"route_table_associations","index":"private-1-rt","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.route_table_associations[\"private-2-rt\"]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"route_table_associations","index":"private-2-rt","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.route_table_associations[\"public-1-rt\"]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"route_table_associations","index":"public-1-rt","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.route_table_associations[\"public-2-rt\"]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"route_table_associations","index":"public-2-rt","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_security_group.security_groups[\"ecs_sg\"]","module_address":"module.vpc","mode":"managed","type":"aws_security_group","name":"security_groups","index":"ecs_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for ECS tasks","name":"english-card-battle-dev-ecs-sg","revoke_rules_on_delete":false,"tags":{"Name":"english-card-battle-dev-vpc-ecs_sg-sg"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-ecs_sg-sg","Project":"english-card-battle","Team":"DevOps"},"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_security_group_rule.security_group_rules[\"ecs_sg-egress-0-0--1-0.0.0.0/0\"]","module_address":"module.vpc","mode":"managed","type":"aws_security_group_rule","name":"security_group_rules","index":"ecs_sg-egress-0-0--1-0.0.0.0/0","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","self":false,"timeouts":null,"to_port":0,"type":"egress"},"after_unknown":{"cidr_blocks":[false],"id":true,"security_group_id":true,"security_group_rule_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[false]}}},{"address":"module.vpc.aws_security_group_rule.security_group_rules[\"ecs_sg-ingress-80-80-tcp-0.0.0.0/0\"]","module_address":"module.vpc","mode":"managed","type":"aws_security_group_rule","name":"security_group_rules","index":"ecs_sg-ingress-80-80-tcp-0.0.0.0/0","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["0.0.0.0/0"],"description":"Application port access","from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"timeouts":null,"to_port":80,"type":"ingress"},"after_unknown":{"cidr_blocks":[false],"id":true,"security_group_id":true,"security_group_rule_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[false]}}},{"address":"module.vpc.aws_subnet.subnets[\"private-1\"]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"subnets","index":"private-1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-1a","cidr_block":"10.0.11.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"english-card-battle-dev-vpc-private-1","SubnetType":"private"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-private-1","Project":"english-card-battle","SubnetType":"private","Team":"DevOps"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.subnets[\"private-2\"]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"subnets","index":"private-2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-1c","cidr_block":"10.0.12.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"english-card-battle-dev-vpc-private-2","SubnetType":"private"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-private-2","Project":"english-card-battle","SubnetType":"private","Team":"DevOps"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.subnets[\"public-1\"]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"subnets","index":"public-1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-1a","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"english-card-battle-dev-vpc-public-1","SubnetType":"public"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-public-1","Project":"english-card-battle","SubnetType":"public","Team":"DevOps"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.subnets[\"public-2\"]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"subnets","index":"public-2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-1c","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"english-card-battle-dev-vpc-public-2","SubnetType":"public"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-public-2","Project":"english-card-battle","SubnetType":"public","Team":"DevOps"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_vpc.vpc","module_address":"module.vpc","mode":"managed","type":"aws_vpc","name":"vpc","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.0.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Name":"english-card-battle-dev-vpc-vpc"},"tags_all":{"Environment":"dev","ManagedBy":"Terraform","Name":"english-card-battle-dev-vpc-vpc","Project":"english-card-battle","Team":"DevOps"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_network_address_usage_metrics":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_network_border_group":true,"main_route_table_id":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}}],"prior_state":{"format_version":"1.0","terraform_version":"1.9.6","values":{"root_module":{"child_modules":[{"resources":[{"address":"module.ecs.data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Asia Pacific (Tokyo)","endpoint":"ec2.ap-northeast-1.amazonaws.com","id":"ap-northeast-1","name":"ap-northeast-1"},"sensitive_values":{}}],"address":"module.ecs"}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"~\u003e 5.0","expressions":{"default_tags":[{"tags":{"constant_value":{"Environment":"dev","ManagedBy":"Terraform","Project":"english-card-battle","Team":"DevOps"}}}],"region":{"constant_value":"ap-northeast-1"}}}},"root_module":{"module_calls":{"alb":{"source":"../../modules/alb","expressions":{"listener_port":{"constant_value":"80"},"name":{"references":["local.name_prefix"]},"security_groups":{"references":["module.vpc.security_groups[\"ecs_sg\"].id","module.vpc.security_groups[\"ecs_sg\"]","module.vpc.security_groups","module.vpc"]},"subnets":{"references":["module.vpc.subnets[\"public-1\"].id","module.vpc.subnets[\"public-1\"]","module.vpc.subnets","module.vpc","module.vpc.subnets[\"public-2\"].id","module.vpc.subnets[\"public-2\"]","module.vpc.subnets","module.vpc"]},"tags":{"references":["local.name_prefix","local.environment"]},"target_group_port":{"references":["local.app_port"]},"vpc_id":{"references":["module.vpc.vpc_id","module.vpc"]}},"module":{"outputs":{"alb_arn":{"expression":{"references":["aws_lb.main.arn","aws_lb.main"]},"description":"ALB ARN"},"alb_dns_name":{"expression":{"references":["aws_lb.main.dns_name","aws_lb.main"]},"description":"ALB DNS name"},"alb_id":{"expression":{"references":["aws_lb.main.id","aws_lb.main"]},"description":"ALB ID"},"alb_zone_id":{"expression":{"references":["aws_lb.main.zone_id","aws_lb.main"]},"description":"ALB zone ID"},"listener_arn":{"expression":{"references":["aws_lb_listener.main.arn","aws_lb_listener.main"]},"description":"Listener ARN"},"target_group_arn":{"expression":{"references":["aws_lb_target_group.main.arn","aws_lb_target_group.main"]},"description":"Target group ARN"}},"resources":[{"address":"aws_lb.main","mode":"managed","type":"aws_lb","name":"main","provider_config_key":"aws","expressions":{"enable_deletion_protection":{"references":["var.enable_deletion_protection"]},"internal":{"references":["var.internal"]},"load_balancer_type":{"constant_value":"application"},"name":{"references":["var.name"]},"security_groups":{"references":["var.security_groups"]},"subnets":{"references":["var.subnets"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_lb_listener.main","mode":"managed","type":"aws_lb_listener","name":"main","provider_config_key":"aws","expressions":{"default_action":[{"target_group_arn":{"references":["aws_lb_target_group.main.arn","aws_lb_target_group.main"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.main.arn","aws_lb.main"]},"port":{"references":["var.listener_port"]},"protocol":{"references":["var.listener_protocol"]}},"schema_version":0},{"address":"aws_lb_target_group.main","mode":"managed","type":"aws_lb_target_group","name":"main","provider_config_key":"aws","expressions":{"health_check":[{"enabled":{"references":["var.health_check.enabled","var.health_check"]},"healthy_threshold":{"references":["var.health_check.healthy_threshold","var.health_check"]},"interval":{"references":["var.health_check.interval","var.health_check"]},"matcher":{"references":["var.health_check.matcher","var.health_check"]},"path":{"references":["var.health_check.path","var.health_check"]},"port":{"references":["var.health_check.port","var.health_check"]},"protocol":{"references":["var.health_check.protocol","var.health_check"]},"timeout":{"references":["var.health_check.timeout","var.health_check"]},"unhealthy_threshold":{"references":["var.health_check.unhealthy_threshold","var.health_check"]}}],"name":{"references":["var.name"]},"port":{"references":["var.target_group_port"]},"protocol":{"references":["var.target_group_protocol"]},"tags":{"references":["var.tags"]},"target_type":{"references":["var.target_type"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":0}],"variables":{"enable_deletion_protection":{"default":false,"description":"Enable deletion protection"},"health_check":{"default":{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2},"description":"Health check configuration"},"internal":{"default":false,"description":"Whether ALB is internal"},"listener_port":{"default":"80","description":"Listener port"},"listener_protocol":{"default":"HTTP","description":"Listener protocol"},"name":{"description":"ALB name"},"security_groups":{"description":"Security group IDs for ALB"},"subnets":{"description":"Subnet IDs for ALB"},"tags":{"default":{},"description":"Tags to apply to ALB resources"},"target_group_port":{"default":80,"description":"Target group port"},"target_group_protocol":{"default":"HTTP","description":"Target group protocol"},"target_type":{"default":"ip","description":"Target type"},"vpc_id":{"description":"VPC ID"}}}},"ecr":{"source":"../../modules/ecr","expressions":{"environment":{"references":["local.environment"]},"image_retention_count":{"constant_value":5},"project_name":{"references":["local.project_name"]},"untagged_image_retention_days":{"constant_value":1}},"module":{"outputs":{"ecr_push_policy_arn":{"expression":{"references":["aws_iam_policy.ecr_push_policy.arn","aws_iam_policy.ecr_push_policy"]},"description":"ARN of the ECR push policy"},"repository_arn":{"expression":{"references":["aws_ecr_repository.server.arn","aws_ecr_repository.server"]},"description":"ARN of the ECR repository"},"repository_name":{"expression":{"references":["aws_ecr_repository.server.name","aws_ecr_repository.server"]},"description":"Name of the ECR repository"},"repository_url":{"expression":{"references":["aws_ecr_repository.server.repository_url","aws_ecr_repository.server"]},"description":"URL of the ECR repository"}},"resources":[{"address":"aws_ecr_lifecycle_policy.server","mode":"managed","type":"aws_ecr_lifecycle_policy","name":"server","provider_config_key":"aws","expressions":{"policy":{"references":["var.environment"]},"repository":{"references":["aws_ecr_repository.server.name","aws_ecr_repository.server"]}},"schema_version":0},{"address":"aws_ecr_repository.server","mode":"managed","type":"aws_ecr_repository","name":"server","provider_config_key":"aws","expressions":{"encryption_configuration":[{"encryption_type":{"constant_value":"AES256"}}],"image_scanning_configuration":[{"scan_on_push":{"constant_value":true}}],"image_tag_mutability":{"constant_value":"MUTABLE"},"name":{"references":["var.project_name","var.environment"]},"tags":{"references":["var.project_name","var.environment","var.environment","var.project_name"]}},"schema_version":0},{"address":"aws_iam_policy.ecr_push_policy","mode":"managed","type":"aws_iam_policy","name":"ecr_push_policy","provider_config_key":"aws","expressions":{"description":{"constant_value":"Policy for pushing images to ECR from GitHub Actions"},"name":{"references":["var.project_name","var.environment"]},"policy":{"references":["aws_ecr_repository.server.arn","aws_ecr_repository.server"]},"tags":{"references":["var.project_name","var.environment","var.environment","var.project_name"]}},"schema_version":0}],"variables":{"environment":{"description":"Environment name (dev, prd)"},"image_retention_count":{"default":10,"description":"Number of ECR images to retain"},"project_name":{"description":"Name of the project"},"untagged_image_retention_days":{"default":1,"description":"Number of days to retain untagged images"}}}},"ecs":{"source":"../../modules/ecs","expressions":{"cluster_name":{"references":["local.name_prefix"]},"container_image":{"references":["local.container_image"]},"container_name":{"references":["local.name_prefix"]},"container_port":{"references":["local.app_port"]},"cpu":{"references":["local.ecs_task_cpu"]},"log_retention_in_days":{"constant_value":3},"memory":{"references":["local.ecs_task_memory"]},"network_configuration":{"references":["module.vpc.subnets[\"private-1\"].id","module.vpc.subnets[\"private-1\"]","module.vpc.subnets","module.vpc","module.vpc.subnets[\"private-2\"].id","module.vpc.subnets[\"private-2\"]","module.vpc.subnets","module.vpc","module.vpc.security_groups[\"ecs_sg\"].id","module.vpc.security_groups[\"ecs_sg\"]","module.vpc.security_groups","module.vpc"]},"service_name":{"references":["local.name_prefix"]},"tags":{"references":["local.name_prefix","local.environment"]},"target_group_arn":{"references":["module.alb.target_group_arn","module.alb"]},"task_definition_family":{"references":["local.name_prefix"]}},"module":{"outputs":{"cluster_arn":{"expression":{"references":["aws_ecs_cluster.main.arn","aws_ecs_cluster.main"]},"description":"ECS cluster ARN"},"cluster_id":{"expression":{"references":["aws_ecs_cluster.main.id","aws_ecs_cluster.main"]},"description":"ECS cluster ID"},"service_name":{"expression":{"references":["aws_ecs_service.main.name","aws_ecs_service.main"]},"description":"ECS service name"},"task_definition_arn":{"expression":{"references":["aws_ecs_task_definition.main.arn","aws_ecs_task_definition.main"]},"description":"Task definition ARN"}},"resources":[{"address":"aws_cloudwatch_log_group.ecs_log_group","mode":"managed","type":"aws_cloudwatch_log_group","name":"ecs_log_group","provider_config_key":"aws","expressions":{"name":{"references":["var.task_definition_family"]},"retention_in_days":{"references":["var.log_retention_in_days"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_ecs_cluster.main","mode":"managed","type":"aws_ecs_cluster","name":"main","provider_config_key":"aws","expressions":{"name":{"references":["var.cluster_name"]},"setting":[{"name":{"constant_value":"containerInsights"},"value":{"constant_value":"enabled"}}],"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_ecs_service.main","mode":"managed","type":"aws_ecs_service","name":"main","provider_config_key":"aws","expressions":{"cluster":{"references":["aws_ecs_cluster.main.id","aws_ecs_cluster.main"]},"desired_count":{"references":["var.desired_count"]},"launch_type":{"constant_value":"FARGATE"},"name":{"references":["var.service_name"]},"network_configuration":[{"assign_public_ip":{"references":["var.network_configuration.assign_public_ip","var.network_configuration"]},"security_groups":{"references":["var.network_configuration.security_groups","var.network_configuration"]},"subnets":{"references":["var.network_configuration.subnets","var.network_configuration"]}}],"tags":{"references":["var.tags"]},"task_definition":{"references":["aws_ecs_task_definition.main.arn","aws_ecs_task_definition.main"]}},"schema_version":1,"depends_on":["aws_iam_role_policy_attachment.ecs_task_execution_role_policy"]},{"address":"aws_ecs_task_definition.main","mode":"managed","type":"aws_ecs_task_definition","name":"main","provider_config_key":"aws","expressions":{"container_definitions":{"references":["var.container_name","var.container_image","var.container_port","aws_cloudwatch_log_group.ecs_log_group.name","aws_cloudwatch_log_group.ecs_log_group","data.aws_region.current.name","data.aws_region.current"]},"cpu":{"references":["var.cpu"]},"execution_role_arn":{"references":["aws_iam_role.ecs_task_execution_role.arn","aws_iam_role.ecs_task_execution_role"]},"family":{"references":["var.task_definition_family"]},"memory":{"references":["var.memory"]},"network_mode":{"constant_value":"awsvpc"},"requires_compatibilities":{"constant_value":["FARGATE"]},"tags":{"references":["var.tags"]}},"schema_version":1},{"address":"aws_iam_role.ecs_task_execution_role","mode":"managed","type":"aws_iam_role","name":"ecs_task_execution_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"references":["var.task_definition_family"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.ecs_task_execution_role_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_task_execution_role_policy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"},"role":{"references":["aws_iam_role.ecs_task_execution_role.name","aws_iam_role.ecs_task_execution_role"]}},"schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0}],"variables":{"cluster_name":{"description":"ECS cluster name"},"container_image":{"description":"Container image"},"container_name":{"description":"Container name"},"container_port":{"description":"Container port"},"cpu":{"description":"CPU units for the task"},"desired_count":{"default":1,"description":"Desired number of running tasks"},"ecs_cluster":{"default":{"capacity_providers":["FARGATE"],"name":"ecs-cluster"},"description":"ECS Cluster"},"ecs_service":{"default":{"deployment_maximum_percent":100,"deployment_minimum_healthy_percent":20,"desired_count":2,"launch_type":"FARGATE","load_balancer":{"container_name":"","container_port":0,"target_group_arn":""},"load_balancer_enabled":false,"name":"ecs-service","network_configuration":{"assign_public_ip":true,"security_groups":[],"subnets":[]}},"description":"ECS Service configuration"},"iam":{"default":{"policy_arn":["arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"],"role_name":"ecs-task-execution-role"},"description":"IAM Role"},"log_group":{"default":{"name":"ecs-log-group","retention_in_days":30},"description":"Cloud Watch Log Group"},"log_retention_in_days":{"default":7,"description":"CloudWatch log retention in days"},"memory":{"description":"Memory for the task"},"network_configuration":{"description":"Network configuration for ECS service"},"service_name":{"description":"ECS service name"},"tags":{"default":{},"description":"Tags to apply to ECS resources"},"target_group_arn":{"default":"","description":"Target group ARN for load balancer"},"task_definition":{"default":{"container_definitions":[{"cpu":256,"environment":[{"name":"ENV","value":"dev"}],"essential":true,"image":"nginx:latest","logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":"ecs-log-group","awslogs-region":"ap-northeast-1","awslogs-stream-prefix":"ecs"}},"memory":512,"name":"ecs-container","portMappings":[{"containerPort":8080,"hostPort":8080,"protocol":"tcp"}]}],"cpu":"256","family":"ecs-task-definition","memory":"512","network_mode":"awsvpc","requires_compatibilities":["FARGATE"]},"description":"ECS Task Definition"},"task_definition_family":{"description":"Task definition family name"}}}},"vpc":{"source":"../../modules/vpc","expressions":{"cidr_block":{"references":["local.vpc_cidr"]},"create_internet_gateway":{"constant_value":true},"create_nat_gateway":{"constant_value":true},"enable_dns_hostnames":{"constant_value":true},"enable_dns_support":{"constant_value":true},"name":{"references":["local.name_prefix"]},"nat_gateway_subnet_id":{"references":["module.vpc.subnets[\"public-1\"].id","module.vpc.subnets[\"public-1\"]","module.vpc.subnets","module.vpc"]},"route_tables":{"references":["module.vpc.subnets[\"public-1\"].id","module.vpc.subnets[\"public-1\"]","module.vpc.subnets","module.vpc","module.vpc.igw_route_table_id","module.vpc","module.vpc.subnets[\"public-2\"].id","module.vpc.subnets[\"public-2\"]","module.vpc.subnets","module.vpc","module.vpc.igw_route_table_id","module.vpc","module.vpc.subnets[\"private-1\"].id","module.vpc.subnets[\"private-1\"]","module.vpc.subnets","module.vpc","module.vpc.nat_route_table_id","module.vpc","module.vpc.subnets[\"private-2\"].id","module.vpc.subnets[\"private-2\"]","module.vpc.subnets","module.vpc","module.vpc.nat_route_table_id","module.vpc"]},"security_group_rules":{"references":["local.app_port","local.app_port"]},"security_groups":{"references":["local.name_prefix"]},"subnets":{"constant_value":{"private-1":{"availability_zone":"ap-northeast-1a","cidr_block":"10.0.11.0/24","subnet_type":"private"},"private-2":{"availability_zone":"ap-northeast-1c","cidr_block":"10.0.12.0/24","subnet_type":"private"},"public-1":{"availability_zone":"ap-northeast-1a","cidr_block":"10.0.1.0/24","subnet_type":"public"},"public-2":{"availability_zone":"ap-northeast-1c","cidr_block":"10.0.2.0/24","subnet_type":"public"}}}},"module":{"outputs":{"igw_route_table_id":{"expression":{"references":["var.create_internet_gateway","aws_route_table.route_table_igw[0].id","aws_route_table.route_table_igw[0]","aws_route_table.route_table_igw"]},"description":"Internet Gateway Route Table ID"},"nat_gateway_id":{"expression":{"references":["var.create_nat_gateway","aws_nat_gateway.nat[0].id","aws_nat_gateway.nat[0]","aws_nat_gateway.nat"]},"description":"The ID of the NAT Gateway"},"nat_gateway_public_ip":{"expression":{"references":["var.create_nat_gateway","aws_eip.nat[0].public_ip","aws_eip.nat[0]","aws_eip.nat"]},"description":"The public IP address of the NAT Gateway"},"nat_route_table_id":{"expression":{"references":["var.create_nat_gateway","aws_route_table.route_table_nat[0].id","aws_route_table.route_table_nat[0]","aws_route_table.route_table_nat"]},"description":"The ID of the NAT Gateway route table"},"security_group_ids":{"expression":{"references":["aws_security_group.security_groups"]},"description":"value = { for sg_name, sg in aws_security_group.security_groups : sg_name =\u003e sg.id }"},"security_groups":{"expression":{"references":["aws_security_group.security_groups"]}},"subnets":{"expression":{"references":["aws_subnet.subnets"]}},"vpc_id":{"expression":{"references":["aws_vpc.vpc.id","aws_vpc.vpc"]},"description":"VPC ID"}},"resources":[{"address":"aws_eip.nat","mode":"managed","type":"aws_eip","name":"nat","provider_config_key":"aws","expressions":{"domain":{"constant_value":"vpc"},"tags":{"references":["var.name"]}},"schema_version":0,"count_expression":{"references":["var.create_nat_gateway"]}},{"address":"aws_internet_gateway.igw","mode":"managed","type":"aws_internet_gateway","name":"igw","provider_config_key":"aws","expressions":{"tags":{"references":["var.name"]},"vpc_id":{"references":["aws_vpc.vpc.id","aws_vpc.vpc"]}},"schema_version":0,"count_expression":{"references":["var.create_internet_gateway"]}},{"address":"aws_nat_gateway.nat","mode":"managed","type":"aws_nat_gateway","name":"nat","provider_config_key":"aws","expressions":{"allocation_id":{"references":["aws_eip.nat[0].id","aws_eip.nat[0]","aws_eip.nat"]},"subnet_id":{"references":["var.nat_gateway_subnet_id"]},"tags":{"references":["var.name"]}},"schema_version":0,"count_expression":{"references":["var.create_nat_gateway"]},"depends_on":["aws_internet_gateway.igw"]},{"address":"aws_route.global_igw","mode":"managed","type":"aws_route","name":"global_igw","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.igw","count.index"]},"route_table_id":{"references":["aws_route_table.route_table_igw","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_internet_gateway"]}},{"address":"aws_route.global_nat","mode":"managed","type":"aws_route","name":"global_nat","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"nat_gateway_id":{"references":["aws_nat_gateway.nat","count.index"]},"route_table_id":{"references":["aws_route_table.route_table_nat","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_nat_gateway"]}},{"address":"aws_route_table.route_table_igw","mode":"managed","type":"aws_route_table","name":"route_table_igw","provider_config_key":"aws","expressions":{"tags":{"references":["var.name"]},"vpc_id":{"references":["aws_vpc.vpc.id","aws_vpc.vpc"]}},"schema_version":0,"count_expression":{"references":["var.create_internet_gateway"]}},{"address":"aws_route_table.route_table_nat","mode":"managed","type":"aws_route_table","name":"route_table_nat","provider_config_key":"aws","expressions":{"tags":{"references":["var.name"]},"vpc_id":{"references":["aws_vpc.vpc.id","aws_vpc.vpc"]}},"schema_version":0,"count_expression":{"references":["var.create_nat_gateway"]}},{"address":"aws_route_table.route_tables","mode":"managed","type":"aws_route_table","name":"route_tables","provider_config_key":"aws","expressions":{"tags":{"references":["var.name","each.key"]},"vpc_id":{"references":["aws_vpc.vpc.id","aws_vpc.vpc"]}},"schema_version":0,"for_each_expression":{"references":["var.route_tables"]}},{"address":"aws_route_table_association.route_table_associations","mode":"managed","type":"aws_route_table_association","name":"route_table_associations","provider_config_key":"aws","expressions":{"route_table_id":{"references":["each.value.route_table_id","each.value"]},"subnet_id":{"references":["each.value.subnet_id","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.route_tables"]}},{"address":"aws_security_group.security_groups","mode":"managed","type":"aws_security_group","name":"security_groups","provider_config_key":"aws","expressions":{"description":{"references":["each.value.description","each.value"]},"name":{"references":["each.value.name","each.value"]},"tags":{"references":["var.name","each.key"]},"vpc_id":{"references":["aws_vpc.vpc.id","aws_vpc.vpc"]}},"schema_version":1,"for_each_expression":{"references":["local.security_group_definitions"]}},{"address":"aws_security_group_rule.security_group_rules","mode":"managed","type":"aws_security_group_rule","name":"security_group_rules","provider_config_key":"aws","expressions":{"cidr_blocks":{"references":["each.value"]},"description":{"references":["each.value.description","each.value"]},"from_port":{"references":["each.value.from_port","each.value"]},"protocol":{"references":["each.value.protocol","each.value"]},"security_group_id":{"references":["aws_security_group.security_groups","each.value.security_group_name","each.value"]},"source_security_group_id":{"references":["each.value.source_security_group_name","each.value","aws_security_group.security_groups","each.value.source_security_group_name","each.value"]},"to_port":{"references":["each.value.to_port","each.value"]},"type":{"references":["each.value.type","each.value"]}},"schema_version":2,"for_each_expression":{"references":["var.security_group_rules"]}},{"address":"aws_subnet.subnets","mode":"managed","type":"aws_subnet","name":"subnets","provider_config_key":"aws","expressions":{"availability_zone":{"references":["each.value.availability_zone","each.value"]},"cidr_block":{"references":["each.value.cidr_block","each.value"]},"tags":{"references":["var.name","each.key","each.value.subnet_type","each.value"]},"vpc_id":{"references":["aws_vpc.vpc.id","aws_vpc.vpc"]}},"schema_version":1,"for_each_expression":{"references":["var.subnets"]}},{"address":"aws_vpc.vpc","mode":"managed","type":"aws_vpc","name":"vpc","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.cidr_block"]},"enable_dns_hostnames":{"references":["var.enable_dns_hostnames"]},"enable_dns_support":{"references":["var.enable_dns_support"]},"tags":{"references":["var.name"]}},"schema_version":1}],"variables":{"cidr_block":{"description":"VPCCIDR"},"create_internet_gateway":{"default":true,"description":""},"create_nat_gateway":{"default":false,"description":"Whether to create NAT Gateway"},"enable_dns_hostnames":{"default":true,"description":"DNS"},"enable_dns_support":{"default":true,"description":"DNS"},"name":{"description":"VPC name"},"nat_gateway_subnet_id":{"default":null,"description":"Subnet ID where NAT Gateway will be created"},"route_tables":{"default":{},"description":"route table"},"security_group_rules":{"default":[],"description":"security group rule"},"security_groups":{"default":{},"description":"security group"},"subnets":{"default":{},"description":"subnets"},"vpc_gateway_endpoints":{"default":{},"description":"VPC"},"vpc_interface_endpoints":{"default":{},"description":"VPC"}}}}}}},"relevant_attributes":[{"resource":"module.vpc.aws_route_table.route_table_igw","attribute":[]},{"resource":"module.alb.aws_lb.main","attribute":["arn"]},{"resource":"module.alb.aws_lb_listener.main","attribute":["arn"]},{"resource":"module.ecs.aws_ecs_cluster.main","attribute":["arn"]},{"resource":"module.ecr.aws_ecr_repository.server","attribute":["name"]},{"resource":"module.ecr.aws_ecr_repository.server","attribute":["arn"]},{"resource":"module.ecs.aws_iam_role.ecs_task_execution_role","attribute":["arn"]},{"resource":"module.vpc.aws_eip.nat[0]","attribute":["public_ip"]},{"resource":"module.ecs.aws_cloudwatch_log_group.ecs_log_group","attribute":["name"]},{"resource":"module.ecs.data.aws_region.current","attribute":["name"]},{"resource":"module.alb.aws_lb_target_group.main","attribute":["arn"]},{"resource":"module.vpc.aws_route_table.route_table_nat[0]","attribute":["id"]},{"resource":"module.vpc.aws_nat_gateway.nat[0]","attribute":["id"]},{"resource":"module.alb.aws_lb.main","attribute":["zone_id"]},{"resource":"module.vpc.aws_security_group.security_groups","attribute":[]},{"resource":"module.vpc.aws_route_table.route_table_nat","attribute":[]},{"resource":"module.ecr.aws_ecr_repository.server","attribute":["repository_url"]},{"resource":"module.vpc.aws_subnet.subnets","attribute":[]},{"resource":"module.alb.aws_lb.main","attribute":["id"]},{"resource":"module.vpc.aws_nat_gateway.nat","attribute":[]},{"resource":"module.vpc.aws_route_table.route_table_igw[0]","attribute":["id"]},{"resource":"module.ecr.aws_iam_policy.ecr_push_policy","attribute":["arn"]},{"resource":"module.alb.aws_lb.main","attribute":["dns_name"]},{"resource":"module.ecs.aws_ecs_service.main","attribute":["name"]},{"resource":"module.vpc.aws_internet_gateway.igw","attribute":[]},{"resource":"module.vpc.aws_eip.nat[0]","attribute":["id"]},{"resource":"module.ecs.aws_ecs_cluster.main","attribute":["id"]},{"resource":"module.vpc.aws_vpc.vpc","attribute":["id"]},{"resource":"module.ecs.aws_iam_role.ecs_task_execution_role","attribute":["name"]},{"resource":"module.ecs.aws_ecs_task_definition.main","attribute":["arn"]}],"timestamp":"2025-07-24T16:56:38Z","applyable":true,"complete":true,"errored":false}
